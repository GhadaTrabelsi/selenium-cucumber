pipeline {
  agent any
  stages {
    stage('Test') {

      parallel {
 
        stage('Maven') {
          steps {
            echo 'Running from Jenkins file'
            bat 'mvn  clean install'
          }
        }

        stage('Cucumber') {
          steps {
            cucumber '**/*.json'
          }
        }

      }
    }
stage('JaCoCo Code Coverage') {
            steps {
                sh 'mvn jacoco:report'
            }
            post {
                always {
                    publishHTML(target: [
                        allowMissing: false,
                        alwaysLinkToLastBuild: true,
                        keepAll: true,
                        reportDir: 'target',
                        reportFiles: 'jacoco-aggregate/index.html',
                    ])
                }
            }
        }
    }
}
  }
}

