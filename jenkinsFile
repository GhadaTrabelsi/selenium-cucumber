pipeline {
  agent any
  stages {
    stage('Test') {

      parallel {
 
        stage('Maven') {
          steps {
            echo 'Running from Jenkins file'
            bat 'mvn  clean install'
          }
        }

        stage('Cucumber') {
          steps {
            cucumber '**/*.json'
          }
        }

      }
    }
stage('JaCoCo Code Coverage') {
            steps {
                sh 'mvn jacoco:report'
            }
           post {
   	 always {
   	 step([$class: 'JacocoPublisher',
   	   	execPattern: 'target/*.exec',
   	   	classPattern: 'target/classes',
   	   	sourcePattern: 'src/main/java',
   	   	exclusionPattern: 'src/test*'
   	 ])
   	 }   
    	}
        }
    }
}
  }
}

